{% extends "base.html" %}
{% load static %}
{% block title %}SmartPay Advance | Chat{% endblock %}
{% block content %}

  <div class="fin-chat-container">
      <!-- Header -->
      <div class="fin-chat-header">
        <img src="{% static 'img/icons/l3.png' %}" alt="Finance Office" class="fin-chat-logo">
        <h2>Finance Office Chat</h2>
      </div>

      <!-- Chat Messages -->
      <div class="fin-chat-messages">
        {% for chat in messages %}
          {% if chat.sender == user %}
            <!-- Staff sent message -->
            <div class="fin-chat-message fin-chat-sent">
              <p>{{ chat.message }}</p>
              <span class="fin-chat-status">
                {% if chat.is_read %}✓✓ Viewed{% else %}✓ Sent{% endif %}
              </span>
            </div>
          {% else %}
            <!-- Finance reply -->
            <div class="fin-chat-message fin-chat-received">
              <p>{{ chat.message }}</p>
              <span class="fin-chat-status">{{ chat.timestamp|date:"H:i" }}</span>
            </div>
          {% endif %}
        {% endfor %}
      </div>


      <!-- Chat Input -->
      <form method="post" class="fin-chat-input-area">
        {% csrf_token %}
        <textarea name="message" class="fin-chat-input" placeholder="Type your message..."></textarea>
        <button type="submit" class="fin-chat-send-btn">Send</button>
      </form>
  </div>

{% endblock %}
